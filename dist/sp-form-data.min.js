/*!
 * SPFormData 3.0.0
 * VanillaJS (pure JavaScript) plugin that reads form data and Change URL Query Parameters
 * https://github.com/ldu1991/sp-form-data/#readme
 *
 * Copyright 2022 Denis Lipatov <ldu2601@gmail.com>
 *
 * Released under the BSD License
 *
 * Released on: November 14, 2022
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SPFormData",[],e):"object"==typeof exports?exports.SPFormData=e():t.SPFormData=e()}(self,(function(){return function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function r(t){return"object"==typeof window.Node?t instanceof window.Node:null!==t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function n(t){return/^[|,]+$/.test(t)}function i(t){return t&&0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}t.d(e,{default:function(){return z}});var a=function(t){if(t instanceof Array)return t.filter(r);if(r(t))return[t];if(e=t,n=Object.prototype.toString.call(e),"object"==typeof window.NodeList?e instanceof window.NodeList:null!==e&&"object"==typeof e&&"number"==typeof e.length&&/^\[object (HTMLCollection|NodeList|Object)]$/.test(n)&&(0===e.length||r(e[0])))return Array.prototype.slice.call(t);var e,n;if("string"==typeof t)try{var i=document.querySelectorAll(t);return Array.prototype.slice.call(i)}catch(t){return[]}return[]},o=function(t){var e=new FormData(t),r=[];return e.forEach((function(t,e){r.push({name:e,value:t})})),r},s=function(t,e){var r={};return t.forEach((function(t){var n;(n=t.value)&&/[^\s]+/.test(n)&&(r.hasOwnProperty(t.name)?r[t.name]+=e+t.value:r[t.name]=t.value)})),r},c={init:!0,separator:",",delayBeforeSend:300,autoSubmit:!0,changeUrlQuery:!0,presetQueries:[],multipleArray:!0};function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){d(t,e),e.add(t)}function m(t,e,r){d(t,e),e.set(t,r)}function d(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,O(t,e,"get"))}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function b(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,O(t,e,"set"),r),r}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,j=new WeakMap,E=new WeakSet,S=new WeakSet,P=new WeakSet,k=new WeakSet,x=new WeakSet,A=new WeakSet,W=new WeakSet,D=new WeakSet,Q=new WeakSet,L=new WeakSet,T=function(){function t(){var e,r,i=this;h(this,t),y(this,L),y(this,Q),y(this,D),y(this,W),y(this,A),y(this,x),y(this,k),y(this,P),y(this,S),y(this,E),m(this,g,{writable:!0,value:void 0}),m(this,j,{writable:!0,value:void 0}),b(this,g,!0),b(this,j,{});for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(1===s.length&&s[0].constructor&&"Object"===Object.prototype.toString.call(s[0]).slice(8,-1)?r=s[0]:(e=s[0],r=s[1]),r||(r={}),this.elements=a(e),!this.elements.length)throw new Error("Form not defined");void 0===r.presetQueries&&this.elements.length&&(r.presetQueries=[],this.elements.forEach((function(t){if(t.querySelectorAll("[name]").forEach((function(t){r.presetQueries.includes(t.name)||r.presetQueries.push(t.name)})),"FORM"!==t.tagName)throw new Error("SPFormData constructor must be passed a form element")}))),this.params=u(u({},c),r),n(this.params.separator)||(this.params.separator=c.separator),this.params&&this.params.on&&Object.keys(this.params.on).forEach((function(t){i.on(t,i.params.on[t])})),this.query=null,this.params.init&&this.init()}var e,r,i;return e=t,(r=[{key:"on",value:function(t,e,r){var n=this;if(!w(n,j))return n;if("function"!=typeof e)return n;var i=r?"unshift":"push";return t.split(" ").forEach((function(t){w(n,j)[t]||(w(n,j)[t]=[]),w(n,j)[t][i](e)})),n}},{key:"once",value:function(t,e,r){var n=this;if(!w(n,j))return n;if("function"!=typeof e)return n;function i(r){n.off(t,i),i.emitterProxy&&delete i.emitterProxy,e.call(n,r)}return i.emitterProxy=e,n.on(t,i,r)}},{key:"off",value:function(t,e){var r=this;return w(r,j)?(t.split(" ").forEach((function(t){void 0===e?w(r,j)[t]=[]:w(r,j)[t]&&w(r,j)[t].forEach((function(n,i){(n===e||n.emitterProxy&&n.emitterProxy===e)&&w(r,j)[t].splice(i,1)}))})),r):r}},{key:"update",value:function(){v(this,k,U).call(this),v(this,L,$).call(this,"update")}},{key:"reset",value:function(){this.elements.forEach((function(t){t.reset()})),v(this,k,U).call(this),v(this,x,C).call(this),v(this,L,$).call(this,"reset")}},{key:"init",value:function(){return v(this,L,$).call(this,"beforeInit",!1),v(this,A,M).call(this),this.params.autoSubmit&&v(this,W,R).call(this),v(this,D,I).call(this),v(this,Q,B).call(this),v(this,L,$).call(this,"init"),v(this,L,$).call(this,"afterInit",!1),this}}])&&p(e.prototype,r),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(){var t=this;if(this.params.changeUrlQuery){var e=new URLSearchParams(window.location.search),r={};e.forEach((function(e,n){var i=t.params,a=i.multipleArray,o=i.presetQueries,s=i.separator;o.length?o.includes(n)&&""!==e&&(a&&-1!==e.indexOf(s)?r[n]=e.split(s):r[n]=e):""!==e&&(a&&-1!==e.indexOf(s)?r[n]=e.split(s):r[n]=e)})),this.query=i(r)?null:r}}function F(t){if(i(t))v(this,x,C).call(this);else{var e=new URL(window.location);Object.keys(t).forEach((function(t){e.searchParams.forEach((function(r,n){n!==t&&e.searchParams.delete(n)}))})),Object.keys(t).forEach((function(r){e.searchParams.set(r,t[r])}));var r=decodeURIComponent(e.href);window.history.pushState({},"",r),v(this,E,q).call(this)}v(this,L,$).call(this,"change")}function N(t){var e=this;if(i(t))v(this,x,C).call(this);else{var r={};Object.keys(t).forEach((function(n){""!==t[n]&&(e.params.multipleArray&&-1!==t[n].indexOf(e.params.separator)?r[n]=t[n].split(e.params.separator):r[n]=t[n])})),this.query=r}v(this,L,$).call(this,"change")}function U(){var t=this,e={};this.elements.forEach((function(r){var n=o(r);n.length?e=u(u({},e),s(n,t.params.separator)):v(t,x,C).call(t)})),this.params.changeUrlQuery?v(this,S,F).call(this,e):v(this,P,N).call(this,e)}function C(){this.params.changeUrlQuery&&(window.history.pushState({},"","."),this.query=null)}function M(){var t=this;this.elements.forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),t.params.autoSubmit||(v(t,k,U).call(t),v(t,L,$).call(t,"submit"))}))}))}function R(){var t=this;this.elements.forEach((function(e){e.querySelectorAll("[name]").forEach((function(e){e.addEventListener("change",(function(){w(t,g)&&clearTimeout(w(t,g)),b(t,g,setTimeout((function(){v(t,k,U).call(t)}),t.params.delayBeforeSend))}))}))}))}function I(){var t=this;window.addEventListener("popstate",(function(){""!==window.location.search?v(t,E,q).call(t):v(t,x,C).call(t),v(t,L,$).call(t,"popstate")}))}function B(){""!==window.location.search&&v(this,E,q).call(this)}function $(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=e?r.query:"";if(!w(r,j))return r;var i=Array.isArray(t)?t:t.split(" ");return i.forEach((function(t){w(r,j)&&w(r,j)[t]&&w(r,j)[t].forEach((function(t){t.call(r,n)}))})),r}var z=T;return e=e.default}()}));